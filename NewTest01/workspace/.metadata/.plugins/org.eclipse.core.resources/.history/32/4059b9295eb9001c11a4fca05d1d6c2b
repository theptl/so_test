package com.test01.controller;

import java.util.HashMap;
import java.util.List;

import javax.servlet.http.HttpServletRequest;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RestController;

import com.test01.service.BoardService;

@RestController
@RequestMapping("/api/")
public class ApiController {
	
	@Autowired private BoardService boardService;
	
	
	
	@RequestMapping(value="/getboardlist", method=RequestMethod.GET)	
	public List<HashMap<String,Object>> getboardlist(HttpServletRequest request) {
		
		String orderby = request.getParameter("orderby");
			
		HashMap<String, Object> param = new HashMap<String, Object>();
		param.put("orderby", orderby);
		
		List<HashMap<String, Object>> result = boardService.getBoardList(param);
		
		return result;

	}
	
	
	
	@RequestMapping(value="/delboardlist", method=RequestMethod.PUT)	
	public void delboardlist(HttpServletRequest request) {
		
		String _delidx = request.getParameter("delidx");
		String[] delidxArray = _delidx.split(",");
		delidxArray.toString();
		
		HashMap<String, Object> param = new HashMap<String, Object>();
		param.put("delidxArray", delidxArray);
		
		boardService.delBoardList(param);
	
	}	
	
	
	
	@RequestMapping(value="/getboarddetail", method=RequestMethod.GET)	
	public HashMap<String,Object> getboarddetail(HttpServletRequest request) {
		
		String idx = request.getParameter("idx");
			
		HashMap<String, Object> param = new HashMap<String, Object>();
		param.put("idx", idx);
		
		HashMap<String, Object> result = boardService.getBoardDetail(param);
		
		return result;

	}	
	
	
	

}
