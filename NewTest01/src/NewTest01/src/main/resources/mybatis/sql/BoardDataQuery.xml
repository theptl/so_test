<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.test01.repository.BoardRepository">

	<select id="GetBoardListCount" resultType="Integer">
		SELECT COUNT(idx) 
		FROM board		
		<if test="searchword != null">
			WHERE title LIKE CONCAT('%',#{searchword},'%') or content LIKE CONCAT('%',#{searchword},'%')		
		</if>
	</select>

    <select id="GetBoardList" resultType="hashmap" parameterType="hashmap">
	  	SELECT * 
	  	FROM board
		<if test="searchword != null">
			WHERE title LIKE CONCAT('%',#{searchword},'%') or content LIKE CONCAT('%',#{searchword},'%')		
		</if>
	  	ORDER BY #{orderby}
	  	limit #{viewMinIdx}, #{itemCountPerPage}
	</select>
	
	<delete id="DelBoardList" parameterType="hashmap"> 
	  	DELETE
	  	FROM board
		WHERE idx IN
		  <foreach item="delidx" collection="delidxArray" index="index"
		      open="(" separator="," close=")">
		        #{delidx}
		  </foreach>
	</delete>
	
    <select id="GetDetailData" resultType="hashmap" parameterType="hashmap">
	  	SELECT * 
	  	FROM board 
	  	WHERE idx = #{idx}
	</select>

    <update id="ModifyDetailData" parameterType="hashmap">
    	UPDATE board
    	<set>
    		<if test="modifyTitle != null">
    		, title = #{modifyTitle}
    		</if>
    		<if test="modifyContent != null">
    		, content = #{modifyContent}
    		</if>
    		<if test="modifyRegdate != null">
    		, regdate = #{modifyRegdate}
    		</if>
   		</set>   		
   		where idx = #{modifyIdx}   		
	</update>
	
	<insert id="CreateDetailData" parameterType="hashmap">  	
	  	INSERT INTO board (title, content, writer, regdate)
	  	VALUES (#{createTitle}, #{createContent}, #{createWriter}, #{createRegdate})
	</insert>
 
</mapper>
