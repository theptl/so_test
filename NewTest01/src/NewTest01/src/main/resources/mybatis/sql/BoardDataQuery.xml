<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.test01.repository.BoardRepository">

	<select id="getBoardListCount" resultType="Integer">
		SELECT COUNT(idx) 
		FROM board;
	</select>

    <select id="getBoardList" resultType="hashmap" parameterType="hashmap">
	  	SELECT * 
	  	FROM board 
	  	ORDER BY idx
	  	limit #{viewMinIdx}, #{itemCountPerPage};
	</select>
	
	<select id="delBoardList" parameterType="hashmap"> 
	  	DELETE
	  	FROM board
		WHERE idx IN
		  <foreach item="delidx" collection="delidxArray" index="index"
		      open="(" separator="," close=")">
		        #{delidx}
		  </foreach>
	</select>
	
    <select id="getDetailData" resultType="hashmap" parameterType="hashmap">
	  	SELECT * 
	  	FROM board 
	  	WHERE idx = #{idx};
	</select>

    <update id="modifyDetailData" parameterType="hashmap">
    	UPDATE board
    	<set>
    		<if test="modifyTitle != null">
    		, title = #{modifyTitle}
    		</if>
    		<if test="modifyContent != null">
    		, content = #{modifyContent}
    		</if>
    		<if test="modifyRegdate != null">
    		, regdate = #{modifyRegdate}
    		</if>
   		</set>   		
   		where idx = #{modifyIdx}   		
	</update>
	
	<select id="createDetailData" parameterType="hashmap">  	
	  	INSERT INTO board (title, content, writer, regdate)
	  	VALUES (#{createTitle}, #{createContent}, #{createWriter}, #{createRegdate})
	</select>
 
</mapper>
